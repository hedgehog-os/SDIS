# Лабораторная работа: Машина Поста и Мультимножество

## Цель работы

- Реализовать вычислительную модель машины Поста с поддержкой базовых команд.
- Разработать класс `Multiset` для работы с мультимножествами, включая вложенные структуры.
- Написать юнит-тесты для проверки корректности реализации.
- Сгенерировать документацию проекта с помощью Doxygen.
- Добавить интерфейсы для интерактивного управления Машиной Поста и Мультимножеством.
- Проверить покрытие тестами.

---

## Реализация

### Машина Поста

Класс `PostMachine` реализует ленту, каретку и последовательное выполнение команд, реализованных как классы:

- `Mark(j)` — установить 1 и перейти к команде `j`
- `Clear(j)` — установить 0 и перейти к `j`
- `Right(j)` / `Left(j)` — сдвиг каретки
- `Jump(j1, j2)` — условный переход в зависимости от значения ячейки
- `Stop()` — завершение работы

Команды парсятся из текстового представления и выполняются пошагово с трассировкой.

#### Интерфейс для Машины Поста

Файл `Post_Machine_Interface.py` реализует **интерактивный CLI-интерфейс** для работы с Машиной Поста.
- Позволяет пошагово строить и запускать программы, управлять лентой, добавлять/удалять команды, сбрасывать состояние.
- Команды интерфейса:
    - `run` — исполнить всю программу до остановки
    - `step` — исполнить одну команду
    - `reset` — сброс состояния
    - `add <команда>` — добавить команду (например, `V 2`, `? 1; 3`)
    - `tape` — просмотр ленты
    - `tape <значение>` — задать ленту
    - `program` — вывести текущий список команд
    - `show` — показать полное состояние машины
    - `rm program` — очистить программу
    - `delete <n>` — удалить команду с номером n
    - `exit` — выйти из интерфейса
- Форматы команд поддерживают все базовые операции машины Поста.
- Реализовано хранение и динамическое редактирование программы.

### Multiset

Класс `Multiset` реализует мультимножество с поддержкой:

- Парсинга из строки: `{a, b, {c, d}, a}`
- Операций: объединение (`+`), пересечение (`*`), разность (`-`)
- Проверки на пустоту, удаления элементов, вычисления мощности
- Построения булеана — всех возможных подмножеств с учётом кратности

#### Инкрементальные операции и инициализация через словарь

- **Инкрементальные операции**: реализованы методы для поэлементного добавления (`add`), удаления (`remove`) и изменения кратности элементов мультимножества через стандартные методы и операторы (`+=`, `-=` и т.д.).
- **Инициализация через словарь**: мультимножество теперь можно создавать не только из строки, но и напрямую из словаря Python (`dict`), где ключи — элементы, а значения — их кратности. Это удобно для программной генерации сложных мультимножеств, а также для интеграции с другими структурами данных.

Пример:
```python
m = Multiset({'a': 2, 'b': 3, 'c': 1})  # Мультимножество: {a, a, b, b, b, c}
```

#### Интерфейс для работы с мультимножествами

Файл `Multiset_Interface.py` реализует **интерактивный CLI-интерфейс** для работы с мультимножествами:
- Позволяет создавать, изменять, объединять, пересекать и удалять элементы мультимножеств в интерактивном режиме.
- Поддерживается вывод булеана, подмножества, проверка пустоты, помощь по командам.

---

## Тестирование

Тесты реализованы с использованием `pytest`:

- `test_Multiset.py` — проверка парсинга, операций, булеана и граничных случаев
- `test_Post_Machine.py` — проверка выполнения команд, переходов, остановки

Примеры тестов:

```python
def test_cardinality():
    m = Multiset('{a, b, b}')
    assert m.cardinality() == 3

def test_post_machine_execution():
    tape = "010"
    commands = parse(["V 1", "→ 2", "!"])
    machine = PostMachine(tape, commands)
    machine.run()
    assert machine.stopped is True
```

---

## Документация с Doxygen

Для генерации документации использован Doxygen:
  - Оформлены docstring-комментарии с тегами @brief, @param, @return
  - Настроен Doxyfile с поддержкой .py файлов, Markdown и графов
  - Главная страница — README.md, описывающая архитектуру проекта
  - Документированы интерфейсы и команды CLI для пользователя.

---

## Архитектура проекта

- `Multiset.py` — реализация мультимножества
- `Post_Machine.py` — реализация машины Поста
- `Commands.py` - реализация комманд машины Поста
- `parse.py` - рефлизация парсера комманд для машины Поста 
- `Multiset_Interface.py` — CLI-интерфейс для мультимножеств
- `Post_Machine_Interface.py` — CLI-интерфейс для машины Поста
- `test_Multiset.py` и `test_Post_Machine.py` — тесты
- `Doxyfile` — конфигурация документации
- `README.md` — описание проекта

---

## Выводы

- Реализованы две независимые вычислительные модели с чёткой архитектурой и интерактивными интерфейсами.
- Расширена функциональность мультимножеств: поддержка инкрементальных операций и инициализации через словарь.
- Обеспечена корректность через тестирование граничных и вложенных случаев.
- Документация полностью автоматизирована и визуализирована, включая описание интерфейсов.
- Проект готов к расширению, интеграции и публикации.
